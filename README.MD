# üöï EcoTaxi API (Django + DRF)

API desenvolvida em Django REST Framework para conectar passageiros a motoristas EcoTaxi, com chamadas baseadas em localiza√ß√£o geogr√°fica, sistema de UUID para identifica√ß√£o sem login, e gerenciamento de estado das corridas.

---

## üß© Funcionalidades

- Registro autom√°tico de passageiros e motoristas (via UUID do dispositivo).
- EcoTaxis possuem estados: aguardando, em tr√¢nsito ou fora de servi√ßo.
- Solicita√ß√£o de corrida baseada na geolocaliza√ß√£o e n√∫mero de assentos dispon√≠veis.
- Distribui√ß√£o autom√°tica da corrida para o EcoTaxi mais pr√≥ximo.
- Corridas possuem status autom√°ticos: `pending`, `accepted`, `rejected`, `cancelled`, `completed`, `expired`.
- Expira√ß√£o autom√°tica de solicita√ß√£o ap√≥s 1 minuto sem resposta.
- Sem autentica√ß√£o: identifica√ß√£o √© feita por UUID √∫nico por dispositivo.
- Endere√ßo pode ser informado manualmente.

---

## üóÇÔ∏è Modelos principais

### `Passageiro`
- `uuid`: identificador do dispositivo (gerado automaticamente).
- `nome`: nome do passageiro.

### `EcoTaxi`
- `uuid`: identificador do dispositivo.
- `nome`: nome do motorista.
- `latitude`, `longitude`: localiza√ß√£o atual.
- `status`: `aguardando`, `transito`, `fora`.
- `assentos_disponiveis`: total de assentos no ve√≠culo.

### `SolicitacaoCorrida`
- `passageiro`: refer√™ncia ao passageiro.
- `eco_taxi`: EcoTaxi que aceitou a corrida (pode estar vazio).
- `latitude_destino`, `longitude_destino`, `endereco_destino`
- `assentos_necessarios`
- `status`: `pending`, `accepted`, `rejected`, `cancelled`, `completed`, `expired`.
- `expiracao`: 1 minuto ap√≥s cria√ß√£o.

---

## üöÄ Endpoints REST

| M√©todo | Endpoint                      | Descri√ß√£o                          |
|--------|-------------------------------|------------------------------------|
| POST   | `/corrida/nova/`              | Cria nova corrida e busca EcoTaxi |
| GET    | `/corrida/<id>/`              | Retorna detalhes da corrida       |
| PUT    | `/corrida/<id>/status/`       | Atualiza status da corrida        |

---

## üì¶ Exemplo de cria√ß√£o de corrida

### Requisi√ß√£o
```http
POST /corrida/nova/
Content-Type: application/json

{
  "passageiro": 1,
  "latitude_destino": -22.767,
  "longitude_destino": -43.108,
  "endereco_destino": "Rua das Flores, 123",
  "assentos_necessarios": 2
}
